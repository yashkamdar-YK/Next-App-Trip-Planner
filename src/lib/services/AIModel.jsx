import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = process.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  export  const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate a detailed travel plan for:\n- **Location**: Goa India\n- **Duration**: 7 days\n- **Budget**: Cheap\n- **Travel Group**:   5 to 10 people\n\nProvide the following details in JSON format:\n1. **Hotel Options**: Include a list of hotels with each hotel’s name, address, price, image URL, geo-coordinates, rating, and description. Ensure the options fit the selected budget.\n\n2. **Itinerary**:\n    - Plan for each of the 7 days, including:\n        - **Places to Visit**: Name, details, image URL, geo-coordinates, ticket pricing, rating, travel time to the next location, and the best time to visit.\n        - **Free and Hidden Attractions**: Include unique or lesser-known sites in Goa India.\n        - **Meal Recommendations**: Suggested restaurants for each meal (breakfast, lunch, and dinner) that align with the Cheap budget.\n        - **Local Food**: Highlight authentic dishes in Goa India and the best places to try them.\n\n3. **Additional Travel Tips**:\n    - Local customs, transport options, best times to explore specific areas, and safety advice.\n    - Recommendations for activities popular with a group of  5 to 10 people\n\nGenerate the plan in a way that enhances the user’s experience, ensuring they feel the itinerary is customized to their preferences.`\n}\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\"Hotel Options\": [{\"name\": \"The LaLiT Golf & Spa Resort Goa\", \"address\": \"Raj Baga, Cansaulim, Goa 403712\", \"price\": \"₹4,500 - ₹8,000\", \"image_url\": \"https://www.lalit.com/images/properties/goa/lalit-golf-spa-resort-goa-header-banner.jpg\", \"geo_coordinates\": \"15.3027, 73.9559\", \"rating\": \"4.5\", \"description\": \"Luxurious resort with a golf course, spa, and multiple dining options. Offers a serene and relaxing atmosphere.\"}, {\"name\": \"The Park Calangute Goa\", \"address\": \"Candolim, Calangute, Goa 403514\", \"price\": \"₹3,000 - ₹5,500\", \"image_url\": \"https://www.theparkhotels.com/images/hotels/calangute/gallery/hotel-exterior.jpg\", \"geo_coordinates\": \"15.5115, 73.8294\", \"rating\": \"4.0\", \"description\": \"Modern and stylish hotel located in the heart of Calangute, close to beaches and nightlife.\"}, {\"name\": \"The Cidade de Goa\", \"address\": \"Vasco da Gama, Goa 403802\", \"price\": \"₹2,500 - ₹4,000\", \"image_url\": \"https://www.thecidadedegoa.com/images/gallery/hotel-exterior.jpg\", \"geo_coordinates\": \"15.4167, 73.8758\", \"rating\": \"4.2\", \"description\": \"Elegant hotel with a colonial charm, situated on the banks of the Zuari River. Offers a peaceful retreat.\"}], \"Itinerary\": [{\"day\": 1, \"places_to_visit\": [{\"name\": \"Old Goa\", \"details\": \"Historic city with churches like Basilica of Bom Jesus, Se Cathedral, and St. Augustine's Tower.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Basilica_Bom_Jesus_Goa_India.jpg/1200px-Basilica_Bom_Jesus_Goa_India.jpg\", \"geo_coordinates\": \"15.4985, 73.8412\", \"ticket_pricing\": \"Free entry to most churches\", \"rating\": \"4.7\", \"travel_time_to_next_location\": \"30 minutes\", \"best_time_to_visit\": \"Morning or evening to avoid the heat\"}, {\"name\": \"Panaji\", \"details\": \"Capital city of Goa with vibrant markets, churches, and the iconic Mandovi River.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Panaji_Goa_India.jpg/1200px-Panaji_Goa_India.jpg\", \"geo_coordinates\": \"15.4997, 73.8251\", \"ticket_pricing\": \"Free entry to most attractions\", \"rating\": \"4.4\", \"travel_time_to_next_location\": \"1 hour\", \"best_time_to_visit\": \"Anytime, but evenings are ideal for the bustling atmosphere\"}], \"free_and_hidden_attractions\": [{\"name\": \"Our Lady of the Immaculate Conception Church\", \"details\": \"A hidden gem with beautiful architecture, located in the village of Chorao.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Our_Lady_of_the_Immaculate_Conception_Church_Chorao_Goa.jpg/1200px-Our_Lady_of_the_Immaculate_Conception_Church_Chorao_Goa.jpg\", \"geo_coordinates\": \"15.5391, 73.8771\", \"rating\": \"4.2\"}], \"meal_recommendations\": {\"breakfast\": \"Cafe Candolim (Calangute)\", \"lunch\": \"Martin's Corner (Panaji)\", \"dinner\": \"Gunpowder (Panaji)\"}, \"local_food\": {\"dish\": \"Fish Thali\", \"best_place\": \"The Fisherman's Wharf (Panaji)\"}}, {\"day\": 2, \"places_to_visit\": [{\"name\": \"Dudhsagar Falls\", \"details\": \"Magnificent waterfall cascading through lush greenery.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Dudhsagar_Falls.jpg/1200px-Dudhsagar_Falls.jpg\", \"geo_coordinates\": \"15.2561, 74.0747\", \"ticket_pricing\": \"₹100 - ₹200\", \"rating\": \"4.8\", \"travel_time_to_next_location\": \"2 hours\", \"best_time_to_visit\": \"Monsoon season (July-September)\"}, {\"name\": \"Bhagwan Mahavir Wildlife Sanctuary\", \"details\": \"Home to diverse flora and fauna, including elephants, leopards, and various bird species.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Bhagwan_Mahavir_Wildlife_Sanctuary.jpg/1200px-Bhagwan_Mahavir_Wildlife_Sanctuary.jpg\", \"geo_coordinates\": \"15.3496, 74.0219\", \"ticket_pricing\": \"₹100 - ₹200\", \"rating\": \"4.5\", \"travel_time_to_next_location\": \"1 hour\", \"best_time_to_visit\": \"Morning or evening for better wildlife spotting\"}], \"free_and_hidden_attractions\": [{\"name\": \"Divar Island\", \"details\": \"Tranquil island with charming villages, historical temples, and scenic views.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Divar_Island_Goa_India.jpg/1200px-Divar_Island_Goa_India.jpg\", \"geo_coordinates\": \"15.5060, 73.8524\", \"rating\": \"4.3\"}], \"meal_recommendations\": {\"breakfast\": \"The Fisherman's Wharf (Panaji)\", \"lunch\": \"Fatima's Corner (Mapusa)\", \"dinner\": \"Copperleaf (Panaji)\"}, \"local_food\": {\"dish\": \"Sorpotel\", \"best_place\": \"Martin's Corner (Panaji)\"}}, {\"day\": 3, \"places_to_visit\": [{\"name\": \"Calangute Beach\", \"details\": \"Popular beach known for its lively atmosphere, water sports, and vibrant nightlife.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Calangute_Beach_Goa_India.jpg/1200px-Calangute_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.5095, 73.8272\", \"ticket_pricing\": \"Free entry\", \"rating\": \"4.6\", \"travel_time_to_next_location\": \"30 minutes\", \"best_time_to_visit\": \"Afternoon for sunbathing and swimming\"}, {\"name\": \"Baga Beach\", \"details\": \"Adjacent to Calangute, offering a more relaxed vibe with water sports and beachside restaurants.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Baga_Beach_Goa.jpg/1200px-Baga_Beach_Goa.jpg\", \"geo_coordinates\": \"15.5183, 73.8231\", \"ticket_pricing\": \"Free entry\", \"rating\": \"4.5\", \"travel_time_to_next_location\": \"1 hour\", \"best_time_to_visit\": \"Evening for a stroll and sunset views\"}], \"free_and_hidden_attractions\": [{\"name\": \"Vagator Beach\", \"details\": \"Secluded beach with cliffs and rock formations, ideal for swimming and sunbathing.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Vagator_Beach_Goa_India.jpg/1200px-Vagator_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.5322, 73.8029\", \"rating\": \"4.7\"}], \"meal_recommendations\": {\"breakfast\": \"Joecons Beach Shack (Calangute)\", \"lunch\": \"The Lazy Goose (Baga)\", \"dinner\": \"Tito's Lane (Baga)\"}, \"local_food\": {\"dish\": \"Prawn Curry\", \"best_place\": \"The Lazy Goose (Baga)\"}}, {\"day\": 4, \"places_to_visit\": [{\"name\": \"Palolem Beach\", \"details\": \"Beautiful beach in South Goa with white sand and clear waters, perfect for swimming and relaxation.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Palolem_Beach_Goa_India.jpg/1200px-Palolem_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.0607, 73.9780\", \"ticket_pricing\": \"Free entry\", \"rating\": \"4.8\", \"travel_time_to_next_location\": \"2 hours\", \"best_time_to_visit\": \"Afternoon for swimming and sunbathing\"}, {\"name\": \"Butterfly Beach\", \"details\": \"Secluded beach accessible only by boat or trek, known for its pristine beauty and unique landscape.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Butterfly_Beach_Goa_India.jpg/1200px-Butterfly_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.0561, 73.9825\", \"ticket_pricing\": \"Free entry\", \"rating\": \"4.7\", \"travel_time_to_next_location\": \"30 minutes\", \"best_time_to_visit\": \"Morning or afternoon for a peaceful experience\"}], \"free_and_hidden_attractions\": [{\"name\": \"Cola Beach\", \"details\": \"Tranquil beach with a laid-back atmosphere, ideal for swimming and sunbathing.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Cola_Beach_Goa_India.jpg/1200px-Cola_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.0388, 73.9897\", \"rating\": \"4.6\"}], \"meal_recommendations\": {\"breakfast\": \"The Little Vagator (Vagator)\", \"lunch\": \"La Plage (Palolem)\", \"dinner\": \"Artjuna (Palolem)\"}, \"local_food\": {\"dish\": \"Xacuti\", \"best_place\": \"Artjuna (Palolem)\"}}, {\"day\": 5, \"places_to_visit\": [{\"name\": \"Mandovi River Cruise\", \"details\": \"Enjoy a relaxing cruise on the Mandovi River, with live music and traditional Goan cuisine.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Mandovi_River_Cruise.jpg/1200px-Mandovi_River_Cruise.jpg\", \"geo_coordinates\": \"15.4997, 73.8251\", \"ticket_pricing\": \"₹500 - ₹1000\", \"rating\": \"4.4\", \"travel_time_to_next_location\": \"1 hour\", \"best_time_to_visit\": \"Evening for a romantic experience\"}, {\"name\": \"Dona Paula Jetty\", \"details\": \"Scenic jetty offering breathtaking views of the Arabian Sea and the surrounding coastline.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Dona_Paula_Jetty.jpg/1200px-Dona_Paula_Jetty.jpg\", \"geo_coordinates\": \"15.4547, 73.8386\", \"ticket_pricing\": \"Free entry\", \"rating\": \"4.3\", \"travel_time_to_next_location\": \"30 minutes\", \"best_time_to_visit\": \"Anytime, but evenings are ideal for sunset views\"}], \"free_and_hidden_attractions\": [{\"name\": \"Miramar Beach\", \"details\": \"Quiet beach with a serene atmosphere, perfect for a relaxing stroll or a peaceful picnic.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Miramar_Beach_Goa_India.jpg/1200px-Miramar_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.5068, 73.8310\", \"rating\": \"4.2\"}], \"meal_recommendations\": {\"breakfast\": \"The Yellow House (Dona Paula)\", \"lunch\": \"Copperleaf (Panaji)\", \"dinner\": \"The Fisherman's Wharf (Panaji)\"}, \"local_food\": {\"dish\": \"Vindaloo\", \"best_place\": \"Martin's Corner (Panaji)\"}}, {\"day\": 6, \"places_to_visit\": [{\"name\": \"Fort Aguada\", \"details\": \"Historic fort with cannons, a lighthouse, and stunning views of the Arabian Sea.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Fort_Aguada_Goa_India.jpg/1200px-Fort_Aguada_Goa_India.jpg\", \"geo_coordinates\": \"15.5296, 73.8241\", \"ticket_pricing\": \"₹20 - ₹50\", \"rating\": \"4.6\", \"travel_time_to_next_location\": \"30 minutes\", \"best_time_to_visit\": \"Morning or evening for scenic views\"}, {\"name\": \"Sinquerim Beach\", \"details\": \"Tranquil beach with a relaxed atmosphere, ideal for swimming, sunbathing, and enjoying the sunset.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Sinquerim_Beach_Goa_India.jpg/1200px-Sinquerim_Beach_Goa_India.jpg\", \"geo_coordinates\": \"15.5259, 73.8206\", \"ticket_pricing\": \"Free entry\", \"rating\": \"4.5\", \"travel_time_to_next_location\": \"1 hour\", \"best_time_to_visit\": \"Afternoon for swimming and sunbathing\"}], \"free_and_hidden_attractions\": [{\"name\": \"Reis Magos Fort\", \"details\": \"Historic fort with a rich history, now a museum showcasing artifacts and exhibits.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Reis_Magos_Fort_Goa_India.jpg/1200px-Reis_Magos_Fort_Goa_India.jpg\", \"geo_coordinates\": \"15.5023, 73.8341\", \"rating\": \"4.4\"}], \"meal_recommendations\": {\"breakfast\": \"The Fisherman's Wharf (Panaji)\", \"lunch\": \"Gunpowder (Panaji)\", \"dinner\": \"The Lazy Goose (Baga)\"}, \"local_food\": {\"dish\": \"Chicken Cafreal\", \"best_place\": \"The Lazy Goose (Baga)\"}}, {\"day\": 7, \"places_to_visit\": [{\"name\": \"Grande Island\", \"details\": \"Island off the coast of Goa, known for its pristine beaches, snorkeling, and diving opportunities.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Grande_Island_Goa_India.jpg/1200px-Grande_Island_Goa_India.jpg\", \"geo_coordinates\": \"15.4716, 73.8464\", \"ticket_pricing\": \"₹500 - ₹1000\", \"rating\": \"4.7\", \"travel_time_to_next_location\": \"1 hour\", \"best_time_to_visit\": \"Morning or afternoon for water activities\"}, {\"name\": \"Netravali Wildlife Sanctuary\", \"details\": \"Forest sanctuary with waterfalls, lush greenery, and diverse wildlife.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Netravali_Wildlife_Sanctuary.jpg/1200px-Netravali_Wildlife_Sanctuary.jpg\", \"geo_coordinates\": \"15.2816, 74.0958\", \"ticket_pricing\": \"₹100 - ₹200\", \"rating\": \"4.5\", \"travel_time_to_next_location\": \"2 hours\", \"best_time_to_visit\": \"Morning or evening for better wildlife spotting\"}], \"free_and_hidden_attractions\": [{\"name\": \"Arvalem Waterfalls\", \"details\": \"Beautiful waterfalls cascading through a lush green valley.\", \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Arvalem_Waterfalls_Goa_India.jpg/1200px-Arvalem_Waterfalls_Goa_India.jpg\", \"geo_coordinates\": \"15.4682, 74.0437\", \"rating\": \"4.6\"}], \"meal_recommendations\": {\"breakfast\": \"The Yellow House (Dona Paula)\", \"lunch\": \"Copperleaf (Panaji)\", \"dinner\": \"The Fisherman's Wharf (Panaji)\"}, \"local_food\": {\"dish\": \"Bebinca\", \"best_place\": \"The Fisherman's Wharf (Panaji)\"}}], \"Additional Travel Tips\": {\"local_customs\": \"Goa is a culturally diverse state, with influences from India and Portugal. It is generally safe to dress modestly, especially when visiting religious sites. Respect local traditions and customs.\", \"transport_options\": \"Goa has a well-connected public transport system, including buses, taxis, and auto-rickshaws. Renting a scooter or car is also a popular option for exploring the state.\", \"best_times_to_explore_specific_areas\": \"North Goa is ideal for beaches, nightlife, and water sports. South Goa offers a more relaxed vibe with scenic beaches and serene backwaters. The monsoon season (July-September) brings lush greenery and cascading waterfalls, but it can also be challenging for travel. The best time to visit Goa is during the winter season (October-March) for pleasant weather and ideal conditions for outdoor activities.\", \"safety_advice\": \"Goa is generally safe for tourists, but it is always wise to take precautions. Avoid walking alone at night, especially in isolated areas. Be aware of your surroundings and keep your valuables safe.\", \"recommendations_for_activities_popular_with_a_group_of_5_to_10_people\": \"Group activities like beach parties, water sports, river cruises, and wildlife safaris are popular in Goa. Consider hiring a guide for a group tour to explore the historical sites or participate in adventure activities like zip-lining or trekking.\"}}\n\n```"},
          ],
        },
      ],
    });